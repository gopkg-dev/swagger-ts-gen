# Project Memory

- Requirement: build a Go CLI to generate TypeScript API files from Swagger/OpenAPI doc.
- Input source: local ./doc.json is present; production use requires fetching from URL.
- Current spec: doc.json is Swagger 2.0 with 19 tags and 78 definitions.
- OperationId coverage: 99 operations missing operationId; naming rule needed.
- Responses commonly use allOf with fiberx.Response and override data schema.
- Some operations use formData file parameters; upload handling rule needed.
- Grouping rule: group by path segment, skipping /api/v{n} prefix (e.g., /api/v1/users -> users).
- Naming rule: prefer operationId, fallback to METHOD + path (camelCase).
- Upload handling: detect formData and build FormData payload for request.
- Model output: only generate a single model/index.ts bundle (no per-type files), even if >500 lines (user confirmed).
- Pagination rule: query params with current + pageSize extend PageParam and exclude these fields from QueryParam body.
- Pagination return: when page query and data is array, return PageResult<T> and use ApiResult<PageResult<T>>.
- QueryParam naming: use operationId prefix stripping (query*), otherwise fall back to group name for QueryParam to match backend naming (e.g., RolesQueryParam).
- QueryParam field comments now mapped from Swagger param description when building query schema.
- FormData generation now guards against undefined body and preserves indentation in generated TS.
- API model `import type` block now emits no trailing comma on the last imported symbol to satisfy strict lint rules.
- Added optional AST-based required-field strategy: with `--required-by-omitempty --go-source`, when schema.required is missing, generator treats fields as required by default and marks only `json:,omitempty` as optional.
- AST optional-field strategy now supports duplicate Go struct names across packages by selecting the best schema-field overlap candidate instead of skipping.
- AST optional-field scan scope is now limited to `schema` and `fiberx` directories to avoid api/biz layer type-name collisions.
- Added `--go-source-include` (comma-separated, default `schema,fiberx`) and TS interface property order now follows matched Go struct field declaration order.
- Group output directory names now use lowerCamel normalization (e.g., `sys-api` -> `sysApi`, `dict-items` -> `dictItems`).
- CLI now enforces `cobra.NoArgs` to prevent silent argument truncation issues (e.g., unquoted `--go-source` paths with spaces).
- Added verbose logging flag (-v/--verbose) to control runtime log output in CLI.
- Verbose logging now prints per-operation details (method/path/query/body/return).
- CLI framework switched to cobra (professional command line package).
- Operation extraction now uses fixed HTTP method order (GET/POST/PUT/PATCH/DELETE/HEAD/OPTIONS) to guarantee deterministic API function generation order.
- Added root README.md documenting CLI usage, generation rules, deterministic ordering, output layout, and quality check commands.
- README now explicitly states the generator is only intended for go-fiber-admin project conventions.
- Generator now always writes outputDir/index.ts with ApiError/ApiResult/PageParam/PageResult base interfaces for go-fiber-admin frontend conventions.
- Module path changed to github.com/gopkg-dev/swagger-ts-gen; README installation switched to go install github.com/gopkg-dev/swagger-ts-gen/cmd/swagger-ts@latest.
- Added a root .gitignore with Go build artifacts, editor/system files, logs/temp files, and output/ directory ignore rules.
- Pagination return detection now supports allOf-composed data (e.g., Response{data=PaginationData{list=[]Model}}) and correctly emits PageResult<T> instead of intersection aliases.
- Query parameter type naming now uses operation function name + Param (e.g., QueryLoggersParam, DeleteLoggersByIdsParam) to avoid ambiguous group-based names like LoggersQueryParam2/3.
